"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.GetAllFiles = void 0;
/* istanbul ignore file */
const glob_1 = __importDefault(require("glob"));
// @ts-ignore
const path_1 = require("path");
class GetAllFiles {
    constructor(seperator = path_1.sep) {
        this.seperator = seperator;
    }
    get sep() {
        return this.seperator === "\\" ? "\\\\" : this.seperator;
    }
    execute({ dir, base }) {
        return new Promise((res, rej) => {
            (0, glob_1.default)(`${dir}/**/*`, { nodir: true, dot: true }, (_err, files) => {
                if (_err) {
                    return rej(_err);
                }
                const fileStruct = files.map((e) => {
                    console.log("e", e, "./.....", e.split(new RegExp(`${base}${this.sep}`)).slice(-1)[0]);
                    return [e, e.split(new RegExp(`${base}${this.sep}`)).slice(-1)[0]];
                });
                res(fileStruct);
            });
        });
    }
}
exports.GetAllFiles = GetAllFiles;
//# sourceMappingURL=GetAllFiles.js.map